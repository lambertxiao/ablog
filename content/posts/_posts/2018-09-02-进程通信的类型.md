---
layout: post
title: "进程通信的类型"
date: 2018-09-02
excerpt: "相互通信的进程共享某些数据结构或共享存储区，进程之间能够通过这些空间进行通信"
tags: [操作系统, os]
comments: true
---

## 进程通信的类型

### 共享存储器系统

相互通信的进程共享某些数据结构或共享存储区，进程之间能够通过这些空间进行通信

* 基于共享数据结构的通信方式

    在这种通信方式中，要求诸进程公用某些数据结构，借以实现诸进程间的信息交换。如在生产者—消费者问题中，就是用 `有界缓冲区` 这种数据结构来实现通信的。

* 基于共享存储区的通信方式

    为了传输大量数据，在存储器中划出了一块 `共享存储区`，诸进程可通过对共享存储区中数据的读或写来实现通信。这种通信方式属于高级通信。进程在通信前，先向系统申请获得共享存储区中的一个分区，并指定该分区的关键字；若系统已经给其他进程分配了这样的分区，则将该分区的描述符返回给申请者，继之，由申请者把获得的共享存储分区连接到本进程上；此后，便可像读、写普通存储器一样地读、写该公用存储分区。

### 消息传递系统

* 进程间的数据交换是以格式化的消息(message)为单位的

    * 直接通信方式

        这是指发送进程利用OS所提供的发送命令，直接把消息发送给目标进程。此时，要求发送进程和接收进程都以显式方式提供对方的标识符。通常，系统提供下述两条通信命令(原语)：

        ```
        Send(Receiver，message)； 发送一个消息给接收进程；
        Receive(Sender，message)； 接收 Sender 发来的消息；
        ```

    * 间接通信方式

        间接通信方式指进程之间的通信需要通过作为共享数据结构的实体。该实体用来暂存发送进程发送给目标进程的消息；接收进程则从该实体中取出对方发送给自己的消息。通常把这种中间实体称为信箱。消息在信箱中可以安全地保存，只允许核准的目标用户随时读取。因此，利用信箱通信方式，既可实现实时通信，又可实现非实时通信

        ```
        Send(mailbox，message)； 将一个消息发送到指定信箱；
        Receive(mailbox，message)； 从指定信箱中接收一个消息；
        ```

        * 信箱的分类

            * 私用信箱

                信箱的拥有者有权从信箱中读取消息，其他用户则只能将自己构成的消息发送到该信箱中。

            * 公用信箱
                它由操作系统创建，并提供给系统中的所有核准进程使用。核准进程既可把消息发送到该信箱中，也可从信箱中读取发送给自己的消息

            * 共享信箱

                它由某进程创建，在创建时或创建后指明它是可共享的，同时须指出共享进程(用户)的名字。信箱的拥有者和共享者都有权从信箱中取走发送给自己的消息。可以是一对一关系、多对一关系、一对多关系、多对多关系


### 管道通信系统

所谓“管道”，是指用于连接一个读进程和一个写进程以实现它们之间通信的一个共享文件，又名pipe文件。向管道(共享文件)提供输入的发送进程(即写进程)，以字符流形式将大量的数据送入管道；而接受管道输出的接收进程(即读进程)，则从管道中接收(读)数据。由于发送进程和接收进程是利用管道进行通信的，故又称为管道通信。

管道机制必须提供以下三方面的协调能力:

* 互斥

    当一个进程正在对 pipe执行读/写操作时，其它(另一)进程必须等待。

* 同步

    指当写(输入)进程把一定数量(如 4 KB)的数据写入pipe，便去睡眠等待，直到读(输出)进程取走数据后，再把它唤醒。当读进程读一空 pipe时，也应睡眠等待，直至写进程将数据写入管道后，才将之唤醒。
